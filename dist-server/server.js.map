{"version":3,"sources":["../server/server.js"],"names":["PORT","process","env","notifier","use","app","json","static","join","__dirname","get","req","res","sendFile","resolve","server","createServer","listen","console","log"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;;;AAEA,IAAMA,OAAOC,QAAQC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;;AAEA,IAAMG,WAAW,wBAAjB;;AAEAA,SAASC,GAAT,CAAa,aAAb,EAA4B;AAAA,SAAM,sBAAN;AAAA,CAA5B;;AAEA,IAAMC,MAAM,yBACTD,GADS,CACL,4BADK,EAETA,GAFS,CAEL,6BAFK,EAGTA,GAHS,CAGL,sBAAO,MAAP,CAHK,EAITA,GAJS,CAIL,qBAAWE,IAAX,EAJK,CAAZ;;AAMA;AACAD,IAAID,GAAJ,CAAQ,MAAR;;AAEA;AACAC,IAAID,GAAJ,CAAQ,GAAR,EAAa,kBAAQG,MAAR,CAAe,eAAKC,IAAL,CAAUC,SAAV,EAAqB,UAArB,CAAf,CAAb;AACAJ,IAAIK,GAAJ,CAAQ,IAAR,EAAc,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1BA,MAAIC,QAAJ,CAAa,eAAKC,OAAL,CAAa,eAAKN,IAAL,CAAUC,SAAV,EAAqB,qBAArB,CAAb,CAAb;AACD,CAFD;;AAIA,IAAMM,SAAS,eAAKC,YAAL,CAAkBX,GAAlB,CAAf;AACAU,OAAOE,MAAP,CAAcjB,IAAd;AACAG,SAASc,MAAT,CAAgBF,MAAhB;;AAEAG,QAAQC,GAAR,6BAAsCnB,IAAtC","file":"server.js","sourcesContent":["import compression from 'compression';\nimport express from 'express';\nimport http from 'http';\nimport morgan from 'morgan';\nimport bodyParser from 'body-parser';\nimport cookieParser from 'cookie-parser';\nimport path from 'path';\nimport api from './api';\nimport { addNotifier, getEvents } from './data';\nimport Notifier from './notifier';\n\nconst PORT = process.env.PORT || 8102;\n\nconst notifier = new Notifier();\n\nnotifier.use('/api/events', () => getEvents());\n\nconst app = express()\n  .use(compression())\n  .use(cookieParser())\n  .use(morgan('tiny'))\n  .use(bodyParser.json());\n\n// REST API\napp.use('/api', api);\n\n// UI\napp.use('/', express.static(path.join(__dirname, '/../dist')));\napp.get('/*', (req, res) => {\n  res.sendFile(path.resolve(path.join(__dirname, '/../dist/index.html')));\n});\n\nconst server = http.createServer(app);\nserver.listen(PORT);\nnotifier.listen(server);\n\nconsole.log(`Server started at port ${PORT}`);\n"]}